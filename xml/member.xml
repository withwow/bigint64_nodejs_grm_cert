<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">  


  <insert id="insMember">
    INSERT INTO member
    (
      uid,
      pf,
      nickname,
      country,
      pt,
      ver,
      regdate,
      uptdate
    )
    VALUES
    (
      #{uid},
      #{pf},
      #{nickname},
      #{country},
      #{pt},
      #{ver},
      now(),
      now()
    )
  </insert>

  <update id="uptMember">
    UPDATE member
    <set>
      uptdate = now(),
      country = #{country},
      ver = #{ver},
      <if test="pt != undefined and pt != ''">    
        pt = #{pt},
      </if>
    </set>
    WHERE
      uid = #{uid}
  </update>

  <insert id="insMemberProp">
    INSERT INTO member_prop
    (
      uid
    )
    VALUES
    (
      #{uid}
    )
  </insert>

  <select id="selMemberProp">
    SELECT 
      gold,
      gem
    FROM
      member_prop
    WHERE
      uid = #{uid}
  </select>

</mapper>